import{i as N,r as A,a as y,o as d,e as s,b as h,l as C,t as f,u as e,f as n,w as c,p as P,s as G,v as J,y as R,ac as K,c as L,J as B,h as k,bE as D,bF as Q,bD as Y,aY as X,Q as E,aK as Z,aj as W,D as ee,bG as te,aa as ae,bH as se,F as H,g as oe,bI as le,bJ as ie,bK as re,bL as ne,x as de,z as ue,aA as me,aZ as ce,bm as fe,B as _e,E as pe,bM as ge,n as be,bN as O,bO as ve,_ as he,bP as ke,bQ as ye,bR as xe,ad as we,A as $e,q as Ce}from"./index-C4szjxrb.js";import{_ as Pe}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Bd-WFY5M.js";import{T as Ve}from"./TabButtons-1rgcL6JH.js";const Ue={class:"border rounded-md w-1/3 mx-auto my-32"},je={class:"border-b px-5 py-3 font-medium text-ink-gray-9"},Se={key:0,class:"px-5 py-3"},Ee={class:"text-ink-gray-7"},Te={class:"px-5 py-3"},Ie={class:"text-ink-gray-7"},Le={__name:"NoPermission",setup(S){const V=N("$user"),b=()=>{window.location.href="/login"};return(m,t)=>{const U=A("router-link");return d(),y("div",Ue,[s("div",je,[t[1]||(t[1]=s("span",{class:"inline-flex items-center before:bg-surface-red-5 before:w-2 before:h-2 before:rounded-md before:mr-2"},null,-1)),C(" "+f(m.__("Not Permitted")),1)]),e(V).data?(d(),y("div",Se,[s("div",Ee,f(m.__("You do not have permission to access this page.")),1),n(U,{to:{name:"Courses"}},{default:c(()=>[n(e(P),{variant:"solid",class:"mt-2"},{default:c(()=>[C(f(m.__("Checkout Courses")),1)]),_:1})]),_:1})])):h("",!0),s("div",Te,[s("div",Ie,f(m.__("Please login to access this page.")),1),n(e(P),{onClick:t[0]||(t[0]=v=>b()),class:"mt-4"},{default:c(()=>[C(f(m.__("Login")),1)]),_:1})])])}}},ze={class:"grid grid-cols-2 gap-10"},Me={class:"text-xs text-ink-gray-5 mb-1"},Re={class:"mb-4"},Be={key:1,class:"mb-4"},Fe={class:"flex items-center"},Oe=["src"],Ne={class:"text-base flex flex-col ml-2"},Ae={class:"text-sm text-ink-gray-4 mt-1"},De={class:"grid grid-cols-2 gap-10"},He={class:"space-y-4"},qe={class:"space-y-4"},Ge={class:"space-y-4"},Je={class:"mb-1.5 text-sm text-ink-gray-5"},Ke={class:"pb-5 float-right"},Qe={__name:"EditProfile",props:G({profile:{type:Object,required:!0}},{reloadProfile:{},reloadProfileModifiers:{}}),emits:["update:reloadProfile"],setup(S){const V=J(S,"reloadProfile"),b=R(!1),m=S,t=K({first_name:"",last_name:"",headline:"",bio:"",image:"",looking_for_job:!1,linkedin:"",github:"",twitter:""}),U=L({url:"lms.lms.api.get_file_info",makeParams(a){return{file_url:a.image}},auto:!1,onSuccess(a){t.image=a}}),v=L({url:"frappe.client.set_value",makeParams(a){var i;return{doctype:"User",name:m.profile.data.name,fieldname:{user_image:((i=t.image)==null?void 0:i.file_url)||null,...t}}},onSuccess(a){m.profile.data=a}}),p=a=>{t.bio=te(t.bio),v.submit({},{onSuccess(){a(),V.value.reload(),b.value&&(b.value=!1,window.location.reload())},onError(i){var $;ae.error((($=i.messages)==null?void 0:$[0])||i)}})},x=a=>{let i=a.name.split(".").pop().toLowerCase();if(!["jpg","jpeg","png"].includes(i))return"Only image file is allowed."},_=a=>{t.image=a},o=()=>{t.image=null};return B(()=>m.profile.data,a=>{a&&(t.first_name=a.first_name,t.last_name=a.last_name,t.headline=a.headline,t.language=a.language,t.bio=a.bio,t.looking_for_job=a.looking_for_job,t.linkedin=a.linkedin,t.github=a.github,t.twitter=a.twitter,a.user_image&&U.submit({image:a.user_image}))}),B(()=>t.language,()=>{t.language!==m.profile.data.language&&(b.value=!0)}),(a,i)=>(d(),k(e(ee),{options:{title:"Edit your profile",size:"3xl"}},{"body-content":c(()=>{var $,j,z;return[s("div",null,[s("div",ze,[s("div",null,[s("div",Me,f(a.__("Profile Image")),1),t.image?(d(),y("div",Be,[s("div",Fe,[s("img",{src:($=t.image)==null?void 0:$.file_url,class:"object-cover h-[50px] w-[50px] rounded-full border-4 border-white object-cover"},null,8,Oe),s("div",Ne,[s("span",null,f((j=t.image)==null?void 0:j.file_name),1),s("span",Ae,f(e(Q)((z=t.image)==null?void 0:z.file_size)),1)]),n(e(Y),{onClick:i[1]||(i[1]=u=>o()),class:"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(d(),k(e(D),{key:0,fileTypes:["image/*"],validateFile:x,onSuccess:i[0]||(i[0]=u=>_(u))},{default:c(({file:u,progress:F,uploading:M,openFileSelector:T})=>[s("div",Re,[n(e(P),{onClick:T,loading:M},{default:c(()=>[C(f(M?`Uploading ${F}%`:"Upload a profile image"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))]),n(e(X),{modelValue:t.looking_for_job,"onUpdate:modelValue":i[2]||(i[2]=u=>t.looking_for_job=u),label:a.__("Open to Opportunities"),description:a.__("Show recruiters and others that you are open to work."),class:"!px-0"},null,8,["modelValue","label","description"])]),s("div",De,[s("div",He,[s("div",qe,[n(e(E),{modelValue:t.first_name,"onUpdate:modelValue":i[3]||(i[3]=u=>t.first_name=u),label:a.__("First Name")},null,8,["modelValue","label"]),n(e(E),{modelValue:t.last_name,"onUpdate:modelValue":i[4]||(i[4]=u=>t.last_name=u),label:a.__("Last Name")},null,8,["modelValue","label"]),n(e(E),{modelValue:t.headline,"onUpdate:modelValue":i[5]||(i[5]=u=>t.headline=u),label:a.__("Headline")},null,8,["modelValue","label"]),n(e(E),{modelValue:t.linkedin,"onUpdate:modelValue":i[6]||(i[6]=u=>t.linkedin=u),label:a.__("LinkedIn ID")},null,8,["modelValue","label"]),n(e(E),{modelValue:t.github,"onUpdate:modelValue":i[7]||(i[7]=u=>t.github=u),label:a.__("GitHub ID")},null,8,["modelValue","label"]),n(e(E),{modelValue:t.twitter,"onUpdate:modelValue":i[8]||(i[8]=u=>t.twitter=u),label:a.__("Twitter ID")},null,8,["modelValue","label"])])]),s("div",Ge,[n(Z,{label:a.__("Language"),modelValue:t.language,"onUpdate:modelValue":i[9]||(i[9]=u=>t.language=u),doctype:"Language"},null,8,["label","modelValue"]),s("div",null,[s("div",Je,f(a.__("Bio")),1),n(e(W),{fixedMenu:!0,onChange:i[10]||(i[10]=u=>t.bio=u),content:t.bio,rows:15,editorClass:"prose-sm py-2 px-2 min-h-[200px] border-outline-gray-2 hover:border-outline-gray-3 rounded-b-md bg-surface-gray-3"},null,8,["content"])])])])])]}),actions:c(({close:$})=>[s("div",Ke,[n(e(P),{variant:"solid",onClick:j=>p($)},{default:c(()=>[C(f(a.__("Save")),1)]),_:1},8,["onClick"])])]),_:1}))}},Ye={class:"absolute left-1/2 mt-3 w-96 max-w-lg -translate-x-1/2 transform rounded-lg bg-surface-white px-4 sm:px-0 lg:max-w-3xl"},Xe={class:"overflow-hidden rounded-lg p-3 shadow-2xl ring-1 ring-black ring-opacity-5"},Ze={class:"flex items-center justify-center space-x-2"},We={class:""},et={class:"relative mt-2 grid w-[25.5rem] gap-2 bg-surface-white lg:grid-cols-2"},tt=["onClick"],at=["src"],st={key:0,class:"mt-2 text-center text-sm text-ink-gray-4"},ot={class:"underline",target:"_blank",href:"https://unsplash.com"},lt={__name:"EditCoverImage",emits:["select"],setup(S,{emit:V}){const b=R(null),m=V,t=L({url:"lms.lms.api.get_unsplash_photos",makeParams:()=>({keyword:b.value}),auto:!0,debounce:500});B(()=>b.value,()=>{t.reload()});const U=p=>{m("select",p.file_url)},v=p=>{let x=p.name.split(".").pop().toLowerCase();if(!["jpg","jpeg","png"].includes(x))return"Only image file is allowed."};return(p,x)=>(d(),k(e(ne),{transition:"default"},{target:c(({isOpen:_,togglePopover:o})=>[le(p.$slots,"default",ie(re({isOpen:_,togglePopover:o})))]),body:c(()=>[s("div",Ye,[s("div",Xe,[s("div",Ze,[n(e(se),{type:"text",placeholder:"search by keyword",modelValue:b.value,"onUpdate:modelValue":x[0]||(x[0]=_=>b.value=_),debounce:300,class:"flex-1"},null,8,["modelValue"]),n(e(D),{fileTypes:["image/*"],validateFile:v,onSuccess:x[1]||(x[1]=_=>U(_))},{default:c(({file:_,progress:o,uploading:a,openFileSelector:i})=>[s("div",We,[n(e(P),{onClick:i,loading:a},{default:c(()=>[C(f(a?`Uploading ${o}%`:"Upload Image"),1)]),_:2},1032,["onClick","loading"])])]),_:1})]),s("div",et,[(d(!0),y(H,null,oe(e(t).data,_=>(d(),y("button",{key:_.id,class:"h-[50px] w-[200px] overflow-hidden rounded hover:opacity-80",onClick:o=>p.$emit("select",_.urls.raw)},[s("img",{src:_.urls.raw+"&w=200&h=50&fit=crop&crop=entropy,faces,focalpoint"},null,8,at)],8,tt))),128))]),e(t).data?(d(),y("div",st,[C(f(p.__("Image search powered by"))+" ",1),s("a",ot,f(p.__("Unsplash")),1)])):h("",!0)])])]),_:3}))}},it={key:1},rt={class:"sticky group top-0 z-10 flex flex-col md:flex-row md:items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},nt={class:"group relative h-[130px] w-full"},dt=["src"],ut={key:2,class:"absolute bottom-[30%] md:bottom-0 left-[50%] mb-4 flex -translate-x-1/2 space-x-2 opacity-0 transition-opacity focus-within:opacity-100 group-hover:opacity-100"},mt={class:"mx-auto -mt-10 md:-mt-4 max-w-4xl translate-x-0 px-5"},ct={class:"flex flex-col md:flex-row items-center"},ft={class:"relative"},_t=["src"],pt={class:"absolute bottom-3 right-1 p-0.5 bg-surface-white rounded-full"},gt={class:"rounded-full bg-surface-green-3 w-fit"},bt={class:"ml-6 mt-5"},vt={class:"text-3xl font-semibold text-ink-gray-9"},ht={class:"text-base text-ink-gray-7 mt-1"},kt={class:"flex items-center space-x-4 mt-2"},yt={class:"mb-4 mt-10"},Pt={__name:"Profile",props:{username:{type:String,required:!0}},setup(S){const{user:V,brand:b}=de(),m=N("$user"),t=me(),U=Ce(),v=R(""),p=R(!1),x=window.read_only_mode,_=S;ue(()=>{m.data&&o.reload(),i()});const o=L({url:"lms.lms.api.get_profile_details",makeParams(){return{username:_.username}}}),a=L({url:"frappe.client.set_value",makeParams(r){var l;return{doctype:"User",name:(l=o.data)==null?void 0:l.name,fieldname:"cover_image",value:r.url}},onSuccess(){o.reload()}}),i=()=>{let r=t.path.split("/");["certificates","roles","slots","schedule"].forEach(w=>{r.includes(w)&&(v.value=ce(w))}),v.value||(v.value="About")};fe(()=>{if(v.value){let r={About:{name:"ProfileAbout"},Certificates:{name:"ProfileCertificates"},Roles:{name:"ProfileRoles"},Slots:{name:"ProfileEvaluator"},Schedule:{name:"ProfileEvaluationSchedule"}}[v.value];U.push(r)}}),B(()=>_.username,()=>{o.reload()});const $=()=>{p.value=!0},j=()=>{var r,l;return((r=m.data)==null?void 0:r.email)===((l=o.data)==null?void 0:l.name)},z=()=>{var r,l;return((r=m.data)==null?void 0:r.is_evaluator)||((l=m.data)==null?void 0:l.is_moderator)},u=()=>{var r,l,w,I;return((l=(r=o.data)==null?void 0:r.roles)==null?void 0:l.includes("Batch Evaluator"))||((I=(w=o.data)==null?void 0:w.roles)==null?void 0:I.includes("Moderator"))},F=()=>{var l;let r=[{label:"About"},{label:"Certificates"}];return(l=m.data)!=null&&l.is_moderator&&r.push({label:"Roles"}),z()&&u()&&(r.push({label:"Slots"}),r.push({label:"Schedule"})),r},M=()=>{$e("frappe.sessions.clear").then(()=>{m.reload().then(()=>{o.reload()})})},T=r=>{window.open(r,"_blank")},q=_e(()=>{var l,w;return[{label:"People"},{label:(l=o.data)==null?void 0:l.full_name,route:{name:"Profile",params:{username:(w=V.doc)==null?void 0:w.username}}}]});return pe(()=>{var r;return{title:(r=o.data)==null?void 0:r.full_name,icon:b.favicon}}),(r,l)=>{var I;const w=A("router-view");return d(),y(H,null,[e(m).data?e(o).data?(d(),y("div",it,[s("header",rt,[n(e(Pe),{class:"h-7",items:q.value},null,8,["items"]),j()?(d(),k(e(P),{key:0,class:"invisible group-hover:visible"},{icon:c(()=>[n(e(ge),{class:"w-4 h-4 stroke-1.5 text-ink-gray-7",onClick:l[0]||(l[0]=g=>M())})]),_:1})):h("",!0)]),s("div",nt,[e(o).data.cover_image?(d(),y("img",{key:0,src:e(o).data.cover_image,class:"h-[130px] w-full object-cover object-center"},null,8,dt)):(d(),y("div",{key:1,class:be([{"bg-surface-gray-2":!e(o).data.cover_image},"h-[130px] w-full"])},null,2)),j()?(d(),y("div",ut,[n(lt,{onSelect:l[1]||(l[1]=g=>e(a).submit({url:g}))},{default:c(({togglePopover:g})=>[e(x)?h("",!0):(d(),k(e(P),{key:0,variant:"outline",onClick:xt=>g()},{prefix:c(()=>[n(e(O),{class:"w-4 h-4 stroke-1.5 text-ink-gray-7"})]),default:c(()=>[C(" "+f(r.__("Edit")),1)]),_:1},8,["onClick"]))]),_:1})])):h("",!0)]),s("div",mt,[s("div",ct,[s("div",null,[s("div",ft,[e(o).data.user_image?(d(),y("img",{key:0,src:e(o).data.user_image,class:"object-cover h-[100px] w-[100px] rounded-full border-4 border-white object-cover"},null,8,_t)):h("",!0),e(o).data.looking_for_job?(d(),k(e(he),{key:1,text:r.__("Open to Opportunities"),placement:"right"},{default:c(()=>[s("div",pt,[s("div",gt,[n(e(ve),{class:"text-ink-white size-5"})])])]),_:1},8,["text"])):h("",!0)])]),s("div",bt,[s("h2",vt,f(e(o).data.full_name),1),s("div",ht,f(e(o).data.headline),1),s("div",kt,[e(o).data.twitter?(d(),k(e(ke),{key:0,class:"size-4 text-ink-gray-5 cursor-pointer",onClick:l[2]||(l[2]=g=>T(e(o).data.twitter))})):h("",!0),e(o).data.linkedin?(d(),k(e(ye),{key:1,class:"size-4 text-ink-gray-5 cursor-pointer",onClick:l[3]||(l[3]=g=>T(e(o).data.linkedin))})):h("",!0),e(o).data.github?(d(),k(e(xe),{key:2,class:"size-4 text-ink-gray-5 cursor-pointer",onClick:l[4]||(l[4]=g=>T(e(o).data.github))})):h("",!0)])]),j()&&!e(x)?(d(),k(e(P),{key:0,class:"mt-3 sm:mt-0 md:ml-auto",onClick:l[5]||(l[5]=g=>$())},{prefix:c(()=>[n(e(O),{class:"w-4 h-4 stroke-1.5 text-ink-gray-7"})]),default:c(()=>[C(" "+f(r.__("Edit Profile")),1)]),_:1})):h("",!0)]),s("div",yt,[n(e(Ve),{class:"inline-block",buttons:F(),modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=g=>v.value=g)},null,8,["buttons","modelValue"])]),(d(),k(w,{profile:e(o),key:(I=e(o).data)==null?void 0:I.name},null,8,["profile"]))])])):h("",!0):(d(),k(Le,{key:0})),n(Qe,{modelValue:p.value,"onUpdate:modelValue":l[7]||(l[7]=g=>p.value=g),reloadProfile:e(o),"onUpdate:reloadProfile":l[8]||(l[8]=g=>we(o)?o.value=g:null),profile:e(o)},null,8,["modelValue","reloadProfile","profile"])],64)}}};export{Pt as default};
//# sourceMappingURL=Profile-D5egX0pB.js.map
