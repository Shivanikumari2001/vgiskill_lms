import{y as p,x as z,z as R,H as w,B as U,E as Y,a as f,e as l,f as o,u as a,w as _,p as C,l as k,t as r,G as q,r as D,h as $,b as v,Q as E,R as G,F as M,g as Q,n as A,i as H,A as I,o as n}from"./index-C4szjxrb.js";import{_ as K}from"./EmptyState.vue_vue_type_script_setup_true_lang-BylHWie9.js";import{_ as O}from"./UserAvatar-Dm5-Kddr.js";import{_ as T}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Bd-WFY5M.js";const J={class:"sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},W={class:"mx-auto w-full max-w-4xl pt-6 pb-10"},X={class:"flex flex-col md:flex-row justify-between mb-4 px-3"},Z={class:"text-xl font-semibold text-ink-gray-7 mb-4 md:mb-0"},ee={class:"grid grid-cols-2 gap-2"},te={key:0,class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40"},se={key:0,class:""},ae={class:"flex flex-col md:flex-row w-full"},le={class:"flex-1"},re={class:"text-base font-medium text-ink-gray-8"},ie={key:0,class:"mt-1.5 text-base text-ink-gray-5"},oe={class:"flex items-center space-x-3 md:space-x-24 text-sm md:text-base mt-1.5"},ne={class:"text-ink-gray-5"},ce={class:"text-ink-gray-5"},de={key:2,class:"flex justify-center mt-5"},ge={__name:"CertifiedParticipants",setup(me){const d=p(""),m=p({}),u=p(""),{brand:V}=z(),x=p(0),P=H("$dayjs");R(()=>{B(),g()});const i=w({doctype:"LMS Certificate",url:"lms.lms.api.get_certified_participants",start:0,cache:["certified_participants"],pageLength:100}),S=()=>{I("lms.lms.api.get_count_of_certified_members",{filters:m.value}).then(e=>{x.value=e})},h=w({doctype:"LMS Certificate",url:"lms.lms.api.get_certification_categories",cache:["certification_categories"],auto:!0,transform(e){return e.unshift({label:__(""),value:""}),e}}),g=()=>{L(),S(),j(),i.update({filters:m.value}),i.reload()},L=()=>{d.value?m.value.category=d.value:delete m.value.category,u.value?m.value.member_name=["like",`%${u.value}%`]:delete m.value.member_name},j=()=>{let e=new URLSearchParams(location.search),t={category:d.value,name:u.value};Object.keys(t).forEach(c=>{t[c]?e.set(c,t[c]):e.delete(c)}),history.replaceState({},"",`${location.pathname}${e.size>0?`?${e.toString()}`:""}`)},B=()=>{let e=new URLSearchParams(location.search);u.value=e.get("name")||"",d.value=e.get("category")||""},F=U(()=>[{label:__("Certified Members"),route:{name:"CertifiedParticipants"}}]);return Y(()=>({title:__("Certified Members"),icon:V.favicon})),(e,t)=>{var y,b;const c=D("router-link");return n(),f(M,null,[l("header",J,[o(a(T),{items:F.value},null,8,["items"]),o(c,{to:{name:"Batches",query:{certification:!0}}},{default:_(()=>[o(a(C),null,{prefix:_(()=>[o(a(q),{class:"h-4 w-4 stroke-1.5"})]),default:_(()=>[k(" "+r(e.__("Get Certified")),1)]),_:1})]),_:1})]),l("div",W,[l("div",X,[l("div",Z,r(x.value)+" "+r(e.__("certified members")),1),l("div",ee,[o(a(E),{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),placeholder:e.__("Search by Name"),type:"text",class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40",onInput:t[1]||(t[1]=s=>g())},null,8,["modelValue","placeholder"]),(y=a(h).data)!=null&&y.length?(n(),f("div",te,[o(a(G),{modelValue:d.value,"onUpdate:modelValue":[t[2]||(t[2]=s=>d.value=s),t[3]||(t[3]=s=>g())],options:a(h).data,placeholder:e.__("Category")},null,8,["modelValue","options","placeholder"])])):v("",!0)])]),(b=a(i).data)!=null&&b.length?(n(),f("div",se,[(n(!0),f(M,null,Q(a(i).data,(s,N)=>(n(),$(c,{to:{name:"ProfileCertificates",params:{username:s.username}},class:"flex h-15 rounded-md hover:bg-surface-gray-2 px-3"},{default:_(()=>[l("div",{class:A(["flex items-center w-full space-x-3 py-2",{"border-b":N<a(i).data.length-1}])},[o(O,{user:s,size:"2xl"},null,8,["user"]),l("div",ae,[l("div",le,[l("div",re,r(s.full_name),1),s.headline?(n(),f("div",ie,r(s.headline),1)):v("",!0)]),l("div",oe,[l("div",ne,r(s.certificate_count)+" "+r(s.certificate_count>1?e.__("certificates"):e.__("certificate")),1),t[5]||(t[5]=l("span",{class:"text-ink-gray-4 md:hidden"},"Â·",-1)),l("div",ce,r(a(P)(s.issue_date).format("DD MMM YYYY")),1)])])],2)]),_:2},1032,["to"]))),256))])):(n(),$(K,{key:1,type:"Certified Members"})),!a(i).list.loading&&a(i).hasNextPage?(n(),f("div",de,[o(a(C),{onClick:t[4]||(t[4]=s=>a(i).next())},{default:_(()=>[k(r(e.__("Load More")),1)]),_:1})])):v("",!0)])],64)}}};export{ge as default};
//# sourceMappingURL=CertifiedParticipants-BbfWdI8g.js.map
