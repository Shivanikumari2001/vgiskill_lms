import{i as B,a as x,o as u,e as l,b as w,t as r,f as i,u as a,cn as H,c5 as Q,h as _,w as p,l as V,a3 as J,y as c,x as q,z as I,B as $,A as K,c as W,J as F,E as G,p as X,P as Y,r as Z,co as ee,Q as O,aK as ae,F as le,g as te}from"./index-C4szjxrb.js";import{_ as oe}from"./EmptyState.vue_vue_type_script_setup_true_lang-BylHWie9.js";import{_ as se}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Bd-WFY5M.js";import{T as ne}from"./TabButtons-1rgcL6JH.js";const ue={class:"flex flex-col border rounded-md p-3 h-full hover:border-outline-gray-3"},re={class:"flex space-x-4 mb-4"},ie={class:"flex flex-col space-y-2 flex-1 break-all"},ce={class:"text-lg font-semibold text-ink-gray-9"},de={class:"font-medium text-ink-gray-7 leading-5"},me={class:"flex items-center space-x-1 text-sm text-ink-gray-7"},pe={key:0,class:"flex items-center space-x-1 text-sm text-ink-gray-7"},ve={class:"space-x-2 mt-auto"},_e={__name:"JobCard",props:{job:{type:Object,default:null}},setup(t){const d=B("$dayjs");return(m,b)=>(u(),x("div",ue,[l("div",re,[l("div",ie,[l("div",ce,r(t.job.company_name),1),l("span",de,r(t.job.job_title),1),l("div",me,[i(a(H),{class:"size-3"}),l("span",null,r(t.job.location)+r(t.job.country?`, ${t.job.country}`:""),1)]),t.job.applicants?(u(),x("div",pe,[i(a(Q),{class:"size-3"}),l("span",null,r(t.job.applicants)+" "+r(t.job.applicants>1?m.__("applicants"):m.__("applicant")),1)])):w("",!0)])]),l("div",ve,[i(a(J),null,{default:p(()=>[V(r(t.job.type),1)]),_:1}),t.job.work_mode?(u(),_(a(J),{key:0},{default:p(()=>[V(r(t.job.work_mode),1)]),_:1})):w("",!0),i(a(J),null,{default:p(()=>[V(r(a(d)(t.job.creation).fromNow()),1)]),_:1})])]))}},be={class:""},fe={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ye={class:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center justify-between w-full md:w-4/5 mx-auto p-5"},we={class:"text-xl font-semibold text-ink-gray-7 mb-4 md:mb-0"},ge={class:"flex items-center justify-between space-x-4"},he={key:0,class:"w-full md:w-4/5 mx-auto p-5 pt-0"},xe={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Ce={__name:"Jobs",setup(t){const d=B("$user"),m=c(null),b=c(null),{brand:R}=q(),f=c(""),g=c(null),n=c({}),C=c({}),T=c(0),M=c(0),k=c("Open"),S=window.read_only_mode;I(()=>{z(),L(),v()});const U=$(()=>{var e;return(e=d.data)==null?void 0:e.is_moderator}),z=()=>{var o,h;if(!((o=d.data)!=null&&o.name))return;const e={status:"Closed"};U.value||(e.owner=(h=d.data)==null?void 0:h.name),K("frappe.client.get_count",{doctype:"Job Opportunity",filters:e}).then(j=>{M.value=j})},L=()=>{let e=new URLSearchParams(location.search);e.has("type")&&(m.value=e.get("type")),e.has("work_mode")&&(b.value=e.get("work_mode"))},N=$(()=>{const e=[{label:__("Open")}];return M.value&&e.push({label:__("Closed")}),e}),y=W({url:"lms.lms.api.get_job_opportunities",cache:["jobs"]}),v=()=>{A(),y.update({params:{filters:n.value,orFilters:C.value}}),y.reload()},A=()=>{var e;n.value.status="Open",m.value?n.value.type=m.value:delete n.value.type,b.value?n.value.work_mode=b.value:delete n.value.work_mode,f.value?C.value={job_title:["like",`%${f.value}%`],company_name:["like",`%${f.value}%`],location:["like",`%${f.value}%`]}:C.value={},g.value?n.value.country=g.value:delete n.value.country,k.value==="Closed"?(n.value.status="Closed",U.value||(n.value.owner=(e=d.data)==null?void 0:e.name)):(n.value.status="Open",delete n.value.owner)};F(k,e=>{v()}),F(g,e=>{v()}),F(y,()=>{var e;T.value=((e=y.data)==null?void 0:e.length)||0});const D=$(()=>[{label:"",value:""},{label:__("Full Time"),value:"Full Time"},{label:__("Part Time"),value:"Part Time"},{label:__("Contract"),value:"Contract"},{label:__("Freelance"),value:"Freelance"}]),E=$(()=>[{label:"",value:""},{label:"On site",value:"On-site"},{label:"Hybrid",value:"Hybrid"},{label:"Remote",value:"Remote"}]);return G(()=>({title:__("Jobs"),icon:R.favicon})),(e,o)=>{var j,P;const h=Z("router-link");return u(),x("div",be,[l("header",fe,[i(a(se),{class:"h-7",items:[{label:e.__("Jobs"),route:{name:"Jobs"}}]},null,8,["items"]),(j=a(d).data)!=null&&j.name?(u(),_(h,{key:0,to:{name:"JobForm",params:{jobName:"new"}}},{default:p(()=>[a(S)?w("",!0):(u(),_(a(X),{key:0,variant:"solid"},{prefix:p(()=>[i(a(Y),{class:"h-4 w-4"})]),default:p(()=>[V(" "+r(e.__("New Job")),1)]),_:1}))]),_:1})):w("",!0)]),l("div",null,[l("div",ye,[l("div",we,r(e.__("{0} Open Jobs").format(T.value)),1),l("div",ge,[N.value.length>1?(u(),_(a(ne),{key:0,modelValue:k.value,"onUpdate:modelValue":o[0]||(o[0]=s=>k.value=s),buttons:N.value,onChange:v},null,8,["modelValue","buttons"])):w("",!0),i(a(O),{type:"text",placeholder:e.__("Search"),modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=s=>f.value=s),class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40",onInput:v},{prefix:p(()=>[i(a(ee),{class:"w-4 h-4 stroke-1.5 text-ink-gray-5",name:"search"})]),_:1},8,["placeholder","modelValue"]),a(d).data?(u(),_(ae,{key:1,doctype:"Country",modelValue:g.value,"onUpdate:modelValue":o[2]||(o[2]=s=>g.value=s),placeholder:e.__("Country"),class:"min-w-32 lg:min-w-0 lg:w-32 xl:w-32"},null,8,["modelValue","placeholder"])):w("",!0),i(a(O),{modelValue:m.value,"onUpdate:modelValue":o[3]||(o[3]=s=>m.value=s),type:"select",options:D.value,class:"min-w-32 lg:min-w-0 lg:w-32 xl:w-32",placeholder:e.__("Type"),onChange:v},null,8,["modelValue","options","placeholder"]),i(a(O),{modelValue:b.value,"onUpdate:modelValue":o[4]||(o[4]=s=>b.value=s),type:"select",options:E.value,class:"min-w-32 lg:min-w-0 lg:w-32 xl:w-32",placeholder:e.__("Work Mode"),onChange:v},null,8,["modelValue","options","placeholder"])])]),(P=a(y).data)!=null&&P.length?(u(),x("div",he,[l("div",xe,[(u(!0),x(le,null,te(a(y).data,s=>(u(),_(h,{to:{name:"JobDetail",params:{job:s.name}},key:s.name},{default:p(()=>[i(_e,{job:s},null,8,["job"])]),_:2},1032,["to"]))),128))])])):(u(),_(oe,{key:1,type:"Job Openings"}))])])}}};export{Ce as default};
//# sourceMappingURL=Jobs-DlyJWu9b.js.map
